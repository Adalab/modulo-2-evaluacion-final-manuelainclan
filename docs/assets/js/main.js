"use strict";const searchInput=document.querySelector(".js-search-input"),searchBtn=document.querySelector(".js-search-btn"),resetBtn=document.querySelector(".js-reset-btn"),drinkList=document.querySelector(".js-drink-list"),favouriteList=document.querySelector(".js-favourite-list"),URL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",alternativeImg="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let drinkListData=[],favouriteListData=[];const favouriteListStored=JSON.parse(localStorage.getItem("favouriteList"));function drawLocalStorage(){favouriteListStored&&(favouriteListData=favouriteListStored,renderFavouriteList(favouriteListData))}function handleSearchDrink(t){t.preventDefault(),fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+searchInput.value).then(t=>t.json()).then(t=>{(t.drinks.strDrinkThumb="")?(drinkListData=t.drinks.map(t=>({image:alternativeImg,name:t.strDrink,drinkId:t.idDrink,alt:t.strDrink})),renderDrinkList(drinkListData)):(drinkListData=t.drinks.map(t=>({image:t.strDrinkThumb,name:t.strDrink,drinkId:t.idDrink,alt:t.strDrink})),renderDrinkList(drinkListData))}),drinkList.innerHTML=""}function renderDrink(t){const e=document.createElement("li");e.setAttribute("class","section--ul--li drink"),e.setAttribute("id",t.drinkId);const i=document.createElement("article");i.setAttribute("class","section--ul--li--article js-article-drink"),i.setAttribute("id",t.drinkId);const r=document.createElement("img");r.src=t.image,r.setAttribute("class","section--ul--li--article--img drink-img"),r.setAttribute("alt","CÃ³ctel "+t.alt);const n=document.createElement("h3"),a=document.createTextNode(t.name);return n.setAttribute("class","section--ul--li--article--title drink-name"),e.appendChild(i),i.appendChild(r),i.appendChild(n),n.appendChild(a),e}function renderDrinkList(t){for(const e of t){const i=renderDrink(e);drinkList.appendChild(i),favouriteListData===t&&ev.currentTarget.classList.add("selected")}addEventToDrink()}function handleClick(t){t.preventDefault();const e=t.currentTarget.id,i=drinkListData.find(t=>t.drinkId===e),r=favouriteListData.findIndex(t=>t.drinkId===e);-1===r?(t.currentTarget.classList.add("selected"),favouriteListData.push(i)):(favouriteListData.splice(r,1),t.currentTarget.classList.remove("selected")),localStorage.setItem("favouriteList",JSON.stringify(favouriteListData)),renderFavouriteList(favouriteListData)}function renderFavouriteList(t){favouriteList.innerHTML="";for(const e of t){const t=renderDrink(e),i=document.createElement("div");i.setAttribute("class","div--prueba js-btn-favorite"),i.setAttribute("id",t.id);const r=document.createElement("i");r.setAttribute("class","fa-solid fa-circle-xmark"),favouriteList.appendChild(t),t.appendChild(i),i.appendChild(r)}const e=document.createElement("div");e.setAttribute("class","js-btn-remove");const i=document.createTextNode("Reset");e.appendChild(i),favouriteList.appendChild(e),addEventToReset(),addEventToFavorite()}function addEventToDrink(){const t=document.querySelectorAll(".js-article-drink");for(const e of t){e.addEventListener("click",handleClick);favouriteListData.find(t=>t.drinkId===e.id)&&e.classList.add("selected")}}function addEventToFavorite(){const t=document.querySelectorAll(".js-btn-favorite");for(const e of t)e.addEventListener("click",handleDelete)}function handleDelete(t){t.preventDefault();const e=t.currentTarget.id,i=favouriteListData.findIndex(t=>t.drinkId===e);favouriteListData.splice(i,1),localStorage.removeItem("favouriteList"),localStorage.setItem("favouriteList",JSON.stringify(favouriteListData)),renderFavouriteList(favouriteListData)}function handleAllDelete(t){t.preventDefault(),localStorage.removeItem("favouriteList"),favouriteList.innerHTML="",favouriteListData=[],drinkList.innerHTML="",renderDrinkList(drinkListData)}function addEventToReset(){document.querySelector(".js-btn-remove").addEventListener("click",handleAllDelete)}drawLocalStorage(),searchBtn.addEventListener("click",handleSearchDrink),fetch(URL).then(t=>t.json()).then(t=>{drinkListData=t.drinks.map(t=>({image:t.strDrinkThumb,name:t.strDrink,drinkId:t.idDrink,alt:t.strDrink})),renderDrinkList(drinkListData)});